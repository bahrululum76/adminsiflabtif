var urlLocation=window.location.pathname,path=window.location.pathname.split("/"),currentPath=path[path.length-1];function showLoader(a){$(a).html('<img src="../assets/images/loader/loader.gif" alt="loading" height="22">')}function showLoader2(a){$(a).html('<img src="../assets/images/loader/loader.gif" alt="loading" height="22">')}function fetchImage(a,t){$(a).html('<div class="progress"><div class="indeterminate"></div></div>'),$.ajax({type:"GET",url:"asisten_tugas/fetch_image?tugas_kode="+t,success:function(t){$(a).html(t),$(".materialboxed").materialbox()}})}function fetchImageCarousel(a,t){$(a).html('<div class="progress"><div class="indeterminate"></div></div>'),$.ajax({type:"GET",url:"asisten_tugas/fetch_image_carousel?tugas_kode="+t,success:function(t){$(a).html(t),setTimeout(()=>{$(".carousel").carousel({fullWidth:!0,indicators:!0,noWrap:!0,dist:0,shift:8})},500)}})}function gantiPassword(a,t){$(".myloader").removeClass("hide"),$.ajax({type:"POST",url:"profil/gantiPassword",data:{password:a,old_pass:t},success:function(a){let t=a.split("|");setTimeout(()=>{"sukses"==t[0]?location.href=t[1]:($(".myloader").addClass("hide"),$("#old_pass").val("").focus(),$("#helper_old_pass").removeClass("hide"))},1e3)}})}function kirimPesan(){sessionStorage.setItem("chat-scroll","go");let a=$(".chat-input-text").val(),t=$(".kanal").val(),e=$(".penerima").val(),i=$(".pengirim").val(),n=$(".u_token").val();""==a?$(".chat-input-text").focus():$.ajax({type:"POST",url:"chat/kirim_pesan",data:{pesan:a,kanal:t,penerima:e,pengirim:i},success:function(){fetch_pesan(),$(".send-loader").addClass("hide"),$(".chat-btn").removeClass("hide"),$(".chat-input-text").val("").css("height","49px"),kirimNotifikasiPesan(n,a,t)}})}function kirimNotifikasiPesan(a,t,e){$.ajax({type:"POST",url:"chat/kirimNotifikasi",data:{token:a,pesan:t,kanal:e},success:function(a){console.log(a)}})}function fetch_pesan(){let a=$(".user_chat_id").val(),t=$(".chat_kanal").val();$.ajax({type:"GET",url:"chat/fetch_pesan?penerima="+a+"&kanal="+t,dataType:"json",success:function(t){let e="",i="",n="",s=t[0],l=t[1],o=t[3],r=t[4];if("nouser"!=a){for(let a=0;a<o.length;a++){let t=o[a].pesan_user.split("-"),l=t[0].split("_"),d=o[a].pesan_kanal,c="",u=a-1;u<0&&(u=0);let $=o[u].date_created.split("-"),p=o[a].date_created.split("-"),m=p[0];p[0]==r&&(m="HARI INI");let h='<div class="center-align"><span class="chat-tanggal">'+m+"</span></div>";"dosen"==l[0]&&(c='style="color:#3671dc;font-size:14px"');let g='<div class="nama-pengirim" '+c+">"+o[a].pesan_nama_pengirim+"</div>";t[0]==s?(i="chat-text-right",g=""):i="chat-text-left",p[0]==$[0]&&a>0&&(h=""),"-"==d&&(g="",n=t[0]==s?null==o[a].id?'<i class="material-icons right light-blue-text text-lighten-2 pesan-status" style="font-size:20px">done_all</i>':'<i class="material-icons right grey-text text-lighten-1 pesan-status" style="font-size:20px">done_all</i>':""),e+=h+'<div class="'+i+" "+s+'"><span class="pesan">'+g+o[a].pesan_isi+"<br>"+n+"<small>"+p[1]+"</small></span></div>"}$(".chat-start").html(e),"go"==sessionStorage.getItem("chat-scroll")&&$(".chat-start").scrollTop(100*$(".chat-start").height()),$(".last_"+l).css("font-weight","400"),o.length>0&&$(".last_"+l).text(o[o.length-1].pesan_isi),$(".jml_"+l).addClass("hide"),$(".read_"+l).addClass("hide"),sessionStorage.setItem("chat-scroll","stop")}cek_pesan_fetch()}})}function cek_pesan_fetch(){let a=$("#jml-notif").val(),t=$("#jml-ticketing").val(),e=$(".penerima").val();$.ajax({type:"GET",url:"chat/cek_pesan",dataType:"json",success:function(i){let n=i[0],s=i[1],l=i[2],o="";for(let a=0;a<s.length;a++)o+='<div class="p-pesan"><img src="'+s[a].foto+'" alt="profil"><div><a class="p-link nav__link" data-user="'+s[a].pesan_pengirim+'" href="'+s[a].link+'"><span class="p-pengirim">'+s[a].pesan_nama_pengirim+'</span><span class="p-jumlah-pesan">'+s[a].jumlah+" pesan masuk</span></a></div></div>";if($("#jml-notif").val(n),$("#counter").text(n),n>0){let t=i[3].link,s=i[3].pesan_pengirim,l=i[3].pesan_isi,r=i[3].foto,d=i[3].pesan_nama_pengirim,c=i[3].jumlah;$(".pulse-pesan").removeClass("hide"),$("#notif-pesan").html(o),$(".read_"+s).addClass("hide"),$(".last_"+s).css("font-weight","600").text(l),$(".jml_"+s).text(c).removeClass("hide"),n>a&&s!=e&&($(".notif-pesan").css("right","-500px"),setTimeout(()=>{$(".np-link").attr("href",t),$(".np-link").data("user",s),$(".np-foto").attr("src",r),$(".np-pengirim").text(d),$(".np-pesan").text(c+" pesan masuk"),$(".notif-pesan").css("right","20px")},1e3))}else $("#notif-pesan").html('<div style="padding: 12px; text-align: center">Tidak ada pesan</div>'),$(".pulse-pesan").addClass("hide");l>t&&kirimNotifikasiTicket("pesan"),l>0?$(".pulse-ticket").removeClass("hide"):$(".pulse-ticket").addClass("hide"),$("#jml-ticketing").val(l),"chat"==currentPath&&$(".p-link, .np-link").removeAttr("href").removeClass("nav__link")}})}function getAsisten(){let a=location.href.split("?");2==a.length&&setTimeout(()=>{$("#"+a[1]).css("background-color","#a8d6ff"),$(".chat-contact").scrollTop($("#"+a[1]).offset().top-190),$("#"+a[1]).click()},100)}function toAsisten(a){$(".chat-contact").scrollTop($("#"+a).offset().top-190),$("#"+a).click()}function uploadFotoTugas(){let a=$("#in-edit").val(),t=new FormData($("#upload-form")[0]),e=$(".file-upload-tugas")[0].files[0];$(".btn-upload-tugas").prop("disabled",!0).css("cursor","wait"),t.append("file",e),$.ajax({url:"asisten_tugas/uploadFoto",type:"POST",data:t,cache:!1,contentType:!1,processData:!1,success:function(t){$(".file-upload-tugas").val(null);let e=t.split("|");"tambah"==e[0]?($(".preview-wrapper, .myloader").addClass("hide"),$(".preview-image").css("filter","none"),1==a?$("#img-preview-edit").append(e[1]):$("#img-preview-tambah").append(e[1]),$(".materialboxed").materialbox()):"edit"==e[0]?($("#image-id").val("-"),$("#image-edit").val("-"),$("#edit-"+e[1]).data("gambar",e[3]),$("#hapus-"+e[1]).data("gambar",e[3]),setTimeout(()=>{$("#foto-tugas-"+e[1]).attr("src",e[2]),$("#foto-tugas-"+e[1]).css("filter","none"),$("#action-foto-"+e[1]).show(),$("#myloader-"+e[1]).addClass("hide")},1e3)):($("#action-foto-"+e[1]).show(),$("#myloader-"+e[1]).addClass("hide"),tampilNotifikasiAjax("orange-gradient","warning","Upload foto gagal")),$(".btn-upload-tugas").prop("disabled",!1).css("cursor","pointer")}})}function batalEditProfil(){$("#asisten_nama").val($("#asisten_nama").data("asisten_nama")),$("#dosen_nama").val($("#dosen_nama").data("dosen_nama")),$("#tgl_lahir").val($("#tgl_lahir").data("tgl_lahir")),$("#bulan_lahir").val($("#bulan_lahir").data("bulan_lahir")),$("#tahun_lahir").val($("#tahun_lahir").data("tahun_lahir")),$("#alamat").val($("#alamat").data("alamat")),$("#email").val($("#email").data("email")),$(".select2").trigger("change")}function readTugas(a){if(a.files&&a.files[0]){let t=new FileReader;t.onload=function(a){$("#hidden-image").attr("src",a.target.result),$(".preview-image").attr("src",a.target.result),setTimeout(()=>{cekDimensiFotoTugas(a.target.result)},1e3)},t.readAsDataURL(a.files[0])}}function readURL(a){if(a.files&&a.files[0]){let t=new FileReader;t.onload=function(a){$(".myloader-text").removeClass("hide"),$(".myloader").removeClass("hide"),$(".hidden-image").attr("src",a.target.result),$(".preview-image").attr("src",a.target.result),$(".preview-image").css("filter","blur(10px)"),setTimeout(()=>{cekDimensiFoto(a.target.result),$(".preview-image").css("filter","none"),$(".myloader-text").addClass("hide"),$(".myloader").addClass("hide")},1e3)},t.readAsDataURL(a.files[0])}}function cekConfigFoto(a){let t=["jpeg","jpg","png","webp"];return-1==$.inArray($(a).val().split(".").pop().toLowerCase(),t)?(tampilNotifikasiAjax("orange-gradient","warning","Format foto tidak didukung. Pastikan foto berformat "+t.join(", ")),0):a.files[0].size>2e6||a.files[0].fileSize>2e6?(tampilNotifikasiAjax("orange-gradient","warning","Ukuran foto terlalu besar. Maksimal 2MB"),0):1}function cekDimensiFotoTugas(a){let t=$("#image-id").val();const e=document.getElementById("hidden-image");e.naturalWidth!==e.naturalHeight?(tampilNotifikasiAjax("orange-gradient","warning","Lebar dan tinggi foto tidak sama. Foto terpilih = "+e.naturalWidth+"x"+e.naturalHeight),$(".file-upload-tugas").val(null),$(".preview-wrapper, .myloader").addClass("hide"),$("#foto-tugas-"+t).css("filter","none"),$("#action-foto-"+t).show(),$("#myloader-"+t).addClass("hide")):e.naturalWidth>1080||e.naturalHeight>1080?(tampilNotifikasiAjax("orange-gradient","warning","Lebar dan tinggi foto terlalu besar. Maksimal 1080x1080"),$(".file-upload-tugas").val(null),$(".preview-wrapper, .myloader").addClass("hide"),$("#foto-tugas-"+t).css("filter","none"),$("#action-foto-"+t).show(),$("#myloader-"+t).addClass("hide")):uploadFotoTugas()}function cekDimensiFoto(a){const t=document.getElementsByClassName("hidden-image");t.naturalWidth!==t.naturalHeight?(tampilNotifikasiAjax("orange-gradient","warning","Lebar dan tinggi foto tidak sama. Foto terpilih = "+t.naturalWidth+"x"+t.naturalHeight),$(".file-upload").val(null),$(".cancel-profil").click()):t.naturalWidth>1080||t.naturalHeight>1080?(tampilNotifikasiAjax("orange-gradient","warning","Lebar dan tinggi foto terlalu besar. Maksimal 1080x1080"),$(".file-upload").val(null),$(".cancel-profil").click()):($(".preview-image").attr("src",a),$(".confirm-profil").removeClass("hide"))}function kirimNotifikasiTicket(a){$.ajax({type:"POST",url:"ticketing/notifikasiTicketing",data:{kanal:a},success:function(a){console.log(a)}})}$(".alert-password").hide(),$(document).ready(function(){$(".input-nilai").hide(),$(".td-nilai-ujian").on("click",function(){let a=$(this).data("npm");$(".txt-n-tugas"+a).hide(),$(".inp-n-tugas"+a).show(),$(".txt-n-ujian"+a).hide(),$(".inp-n-ujian"+a).show(),setTimeout(function(){$(".inp-n-tugas"+a).css("width","50px"),$(".inp-n-ujian"+a).css("width","50px")},10)}).change(function(){let a=$(this).data("npm"),t=$(".jadwal_kode").val(),e=$(".p_kehadiran").val(),i=$(".p_tugas").val(),n=$(".p_ujian").val(),s=$(".kehadiran"+a).html(),l=$(".txt-n-tugas"+a).text(),o=$(".txt-n-ujian"+a).text(),r=$("#tugas"+a).text(),d=$(".inp-n-tugas"+a).val(),c=$(".inp-n-ujian"+a).val();if(d>100||c>100)tampilNotifikasiAjax("orange-gradient","warning","Maksimal nilai tugas atau ujian adalah 100"),$(".inp-n-tugas"+a).val(l),$(".inp-n-ujian"+a).val(o);else if(d<0||c<0)tampilNotifikasiAjax("orange-gradient","warning","Oops! nilai tidak boleh minus"),$(".inp-n-tugas"+a).val(l),$(".inp-n-ujian"+a).val(o);else if(d<r)tampilNotifikasiAjax("orange-gradient","warning","Nilai tugas tidak boleh kurang dari total tugas"),$(".inp-n-tugas"+a).val(l),$(".inp-n-ujian"+a).val(o);else{showLoader(".txt-n-tugas"+a),showLoader(".txt-n-ujian"+a);let l=s*e/100+d*i/100+c*n/100;l=l.toString(),$.ajax({type:"POST",url:"asisten_penilaian/penilaian",data:"npm="+a+"&jadwal_kode="+t+"&nilai_tugas="+d+"&nilai_ujian="+c,success:function(t){let e=t.split("|");setTimeout(()=>{$(".txt-n-tugas"+a).html(e[0]),$(".txt-n-ujian"+a).html(e[1]),$(".inp-n-tugas"+a).val(e[0]),$(".inp-n-ujian"+a).val(e[1]),$(".total"+a).html(l)},1e3)}})}}),$(document).mouseup(function(){$(".hilang").hide(),$(".muncul").show()})}),$(document).ready(function(){$(".pilih_kelas").change(function(){$("#kelas-kode").val($(this).val())}),$(document).change(function(){""==$("#kelas-kode").val()||""==$("#matkum-id").val()||$("#form-nilai").submit()}),$(".pilih_matkum").change(function(){$("#matkum-id").val($(this).val()),$(".pilih_kelas").val(null).trigger("change")})}),$(document).ready(function(a){$(".datatable, .datatable-nopage").on("click",".status-modul",function(){let a=$(this).attr("id"),t=$("#"+a+" .badge-status").html();return showLoader("#"+a),$.ajax({type:"POST",url:"modul_praktikum/statusModul",data:{registrasi_id:a,status:t},success:function(t){let e=t.split("|");setTimeout(()=>{$("#"+a).html(e[0]),$("#tgl"+a).html(e[1])},1e3)}}),!1})}),$(document).ready(function(a){$(".datatable, .datatable-nopage").on("click",".status-krisar",function(){let a=$(this).attr("id"),t=$("#"+a+" .badge-status").html();return showLoader("#"+a),$.ajax({type:"POST",url:"kritik_saran/statusKrisar",data:{krisar_id:a,status:t},success:function(t){setTimeout(()=>{$("#"+a).html(t)},1e3)}}),!1})}),$(document).ready(function(a){$(".datatable, .datatable-nopage").on("click",".status-bayar",function(){let a=$(this).attr("id"),t=$("#"+a+" .badge-status").html(),e=parseInt($(".lunas").html()),i=parseInt($(".belum").html());return showLoader("#"+a),$.ajax({type:"POST",url:"pembayaran/statusBayar",data:{npm:a,status:t},success:function(t){let n=t.split("|");setTimeout(()=>{$("#"+a).html(n[1]),$(".tgl_bayar_"+a).text(n[2]),"lunas"===n[0]?($(".lunas").html(e+1),$(".belum").html(i-1)):($(".lunas").html(e-1),$(".belum").html(i+1))},1e3)}}),!1})}),$(document).ready(function(){$(".btn-hapus-tugas, .btn-edit-tugas").on("click",function(){let a=$(this).data("tugas_deskripsi");$(".summernote").eq(1).summernote("code",a);let t=$(this).data("tugas_id"),e=$(this).data("tugas_judul"),i=$(this).data("tugas_kode"),n=$(this).data("tugas_status"),s=$(this).data("foto_lama"),l=$(this).data("tanggal"),o=$(this).data("jam"),r=$(this).data("tugas_foto");$(".tugas_id").val(t),$(".tugas_judul").val(e),$(".tugas_kode").val(i),$(".foto_lama").val(s),$(".tugas_foto").val(r),$(".tanggal").val(l),$(".jam").val(o),$(".tugas_status").val(n),$(".tugas_deskripsi").val(a),$(".tugas-deskripsi-p").text(a),$(".tugas-judul-p").text(e),$(".tugas-kode-txt").text(i),$(".status_tugas").val(n),M.textareaAutoResize($(".tugas_deskripsi")),M.textareaAutoResize($(".tugas_judul")),$(".preview-image").attr("src",r),$(".select2-data").trigger("change")}),$(".btn-lihat-tugas").on("click",function(){let a=$(this).data("tugas_kode"),t=$(this).data("tugas_judul"),e=$(this).data("tugas_deskripsi");fetchImageCarousel("#image-modal-wrapper",a),$("#judul-tugas").html(t),$("#deskripsi-tugas").html(e)}),$(".btn-notifikasi-tugas").on("click",function(){let a=$(this).data("pesan"),t=$(this).data("jadwal_kode");$("#label-notif").addClass("active"),$(".pesan_notifikasi").val(a),$(".jadwal_kode").val(t),setTimeout(()=>{M.textareaAutoResize($(".pesan_notifikasi"))},400)}),$("#form-notifikasi-tugas").submit(function(){let a=$(this).serialize();return $("button[type=submit]").prop("disabled",!0).css("cursor","wait"),$(".mymodal-loader").removeClass("hide"),$.ajax({type:"POST",url:$(this).attr("action"),data:a,success:function(a){let t=a.split("|");$(".mymodal-loader").addClass("hide"),$("button[type=submit]").prop("disabled",!1).css("cursor","pointer"),$(".modal").modal("close"),"sending"==t[0]?tampilNotifikasiAjax("success-gradient","check_circle","Notifikasi tugas berhasil dikirim. Terkirim : "+t[1]):tampilNotifikasiAjax("red-gradient","warning","Notifikasi tugas gagal dikirim. Ekstensi GMP tidak terinstal di server")}}),!1}),$(".tugas_select").change(function(){let a=$(this).val();$("input.tugas_status").val(a)}),$(".btn-buat-tugas").on("click",function(){let a=$(this).data("tugas_kode");$("#kode-t").val(a),$("#in-edit").val(0)}),$("#btn-batal-tambah").on("click",function(){$("#form-tambah").trigger("reset")}),$(".get-image").on("click",function(){let a=$(this).data("tugas_kode");$(".file-upload-tugas").val(null),$("#kode-t").val(a),$("#in-edit").val(1),fetchImage("#img-preview-edit",a)}),$(".input-nilai").hide(),$(".td-data").on("click",function(){let a=$(this).attr("id");$(".text-nilai"+a).hide(),$(".input-nilai"+a).show(),setTimeout(function(){$(".input-nilai"+a).css("width","50px")},10)}).change(function(){let a=$(this).attr("id"),t=$(".tugas_id").val(),e=$(".jadwal_kode").val(),i=$(".text-nilai"+a).html(),n=$(".input-nilai"+a).val(),s=$(".tgl_upload"+a).val();n>=10&&n<=100||0==n?(showLoader2(".text-nilai"+a),$.ajax({type:"POST",url:"asisten_tugas/penilaian",data:"npm="+a+"&tugas_id="+t+"&nilai="+n+"&nilai_asal="+i+"&jadwal_kode="+e+"&tgl_upload="+s,success:function(t){setTimeout(()=>{$(".text-nilai"+a).html(t)},1e3),$(".input-nilai"+a).val(t)}})):n>100?(tampilNotifikasiAjax("orange-gradient","warning","Nilai maksimal adalah 100"),$(".input-nilai"+a).val(i)):n<10&&n>0?(tampilNotifikasiAjax("orange-gradient","warning","Masukkan nilai antara 10 - 100"),$(".input-nilai"+a).val(i)):n<0&&(tampilNotifikasiAjax("orange-gradient","warning","Oops! nilai tidak boleh minus"),$(".input-nilai"+a).val(i))}),$(".datatable, .datatable-nopage").on("click",".status-tugas",function(){let a=$(this).data("tugas_id"),t=$("#status-tugas-"+a+" .badge-status").html();return showLoader("#status-tugas-"+a),$.ajax({type:"POST",url:"asisten_tugas/statusTugas",data:{tugas_id:a,status:t},success:function(t){let e=t.split("|");setTimeout(()=>{$("#status-tugas-"+a).html(e[0]),$("#btn-edit-tugas-"+a).data("tugas_status",e[1])},1e3)}}),!1})}),$(document).ready(function(){$(".table-absensi-mhs").on("click",".kehadiran",function(){let a=$(this).attr("id"),t=$("#"+a+" .badge-status").html(),e=$(".jadwal_kode").val(),i=$(".absen_tgl").val(),n=$(".pertemuan").val();return 0!=n.length?(showLoader("#"+a),$.ajax({type:"POST",url:"asisten_absensi/do_absen",data:"npm="+a+"&kehadiran="+t+"&jadwal_kode="+e+"&pertemuan="+n+"&absen_tgl="+i,success:function(t){setTimeout(()=>{$("#"+a).html(t)},1e3)}})):tampilNotifikasiAjax("orange-gradient","warning","Pertemuan belum dipilih!"),!1})}),$(document).ready(function(){$(".form-absen").submit(function(){let a=$(".asisten_id").val(),t=$(".password").val(),e=$("#asisten"+a+" .badge-status").html(),i=$(".jadwal_kode").val(),n=$(".absen_tgl").val(),s=$(".pertemuan").val();return 0!=s.length?(showLoader("#asisten"+a),$.ajax({type:"POST",url:"asisten_absensi/do_absen_asisten",data:"asisten_id="+a+"&kehadiran="+e+"&jadwal_kode="+i+"&pertemuan="+s+"&password="+t+"&absen_tgl="+n,success:function(t){let e=t.split("|");"salah"==e[0]?($(".password").val(""),$(".alert-password").slideDown(100),$("#asisten"+a).html(e[1]),setTimeout(function(){$(".alert-password").slideUp(100)},3e3)):($(".modal").modal("close"),$(".alert-password").hide(),$(".password").val(""),setTimeout(()=>{$("#asisten"+a).html(e[1])},1e3))}})):tampilNotifikasiAjax("orange-gradient","warning","Pertemuan belum dipilih!"),!1})}),$(".btn-konfirmasi-absen").on("click",function(){let a=$(this).data("asisten_id");$(".asisten_id").val(a)}),$(".btn-edit-persentase").on("click",function(){let a=$(this).data("p_kehadiran"),t=$(this).data("p_tugas"),e=$(this).data("p_ujian");$(".p_kehadiran").val(a),$(".p_tugas").val(t),$(".p_ujian").val(e)}),$(document).ready(function(){$(".btn-password").on("click",function(){let a=$("#new_pass").val(),t=$("#old_pass").val();a!=$("#conf_new_pass").val()?($("#conf_new_pass").val("").focus(),$("#helper_conf_pass").removeClass("hide")):gantiPassword(a,t)}),$("input").keyup(function(){$(".helper-text").addClass("hide")})}),$(document).ready(function(){$(".catatan-item").on({mouseenter:function(){$(this).children(".catatan-content").css("overflow","auto"),$(this).children(".catatan-footer").children(".catatan-action").css("opacity",1)},mouseleave:function(){$(this).children(".catatan-content").css("overflow","hidden").scrollTop(0),$(this).children(".catatan-footer").children(".catatan-action").css("opacity",0)}}),$(".warna-item").on("click",function(){$(".catatan_warna").val($(this).data("warna")),$(".modal-head,.modal-content,.modal-footer").css("background-color",$(this).data("warna")),$(".warna-item").html(""),$(this).html('<i class="material-icons warna-check">check</i>')}),$(".pin-btn").on("click",function(){0==$(".catatan_status").val()?($(".catatan_status").val(1),$(this).html('<i class="material-icons">push_pin</i>')):($(".catatan_status").val(0),$(this).html('<i class="material-icons-outlined">push_pin</i>'))}),$(".btn-tambah-catatan").on("click",function(){$(".modal-head,.modal-content,.modal-footer").css("background-color","#fafafa"),$(".catatan_warna").val("#ffffff"),$(".catatan_status").val(0),$(".pin-btn").html('<i class="material-icons-outlined">push_pin</i>'),$("#default-warna").html('<i class="material-icons warna-check">check</i>')}),$(".btn-edit-catatan").on("click",function(){let a=$(this).data("catatan_warna"),t=$(this).data("catatan_status");$(".catatan_id").val($(this).data("catatan_id")),$(".catatan_judul").val($(this).data("catatan_judul")),$(".summernote-tentang").eq(1).summernote("code",$(this).data("catatan_isi")),$(".catatan_warna").val(a),$(".catatan_status").val(t),$(".modal-head,.modal-content,.modal-footer").css("background-color",a),$(".warna-item").html(""),$(a).html('<i class="material-icons warna-check">check</i>'),1==t?$(".pin-btn").html('<i class="material-icons">push_pin</i>'):$(".pin-btn").html('<i class="material-icons-outlined">push_pin</i>')}),$(".btn-hapus-catatan").on("click",function(){$(".modal-head,.modal-content,.modal-footer").css("background-color","#fafafa"),$(".catatan_id").val($(this).data("catatan_id"))})}),$(document).ready(function(){"chat"==currentPath?($(".p-link, .np-link").removeAttr("href").removeClass("nav__link"),getAsisten(),cek_pesan_fetch(),setInterval(()=>{fetch_pesan()},5e3),$(".np-link, .p-link").on("click",function(){toAsisten($(this).data("user")),$(".notif-pesan").css("right","-500px")}),$(document).on("click",".p-link",function(){toAsisten($(this).data("user")),$(".notif-pesan").css("right","-500px")})):(cek_pesan_fetch(),setInterval(()=>{cek_pesan_fetch()},1e4));for(let a=128070;a<=128080;a++)$(".emoji-hand").append('<span class="emoji">&#'+a+";&#127995;</span>");for(let a=129304;a<=129311;a++)$(".emoji-hand").append('<span class="emoji">&#'+a+";&#127995;</span>");$(".emoji-hand").append('<span class="emoji">&#129330;&#127995;</span>'),$(".emoji-hand").append('<span class="emoji">&#128170;&#127995;</span>'),$(".emoji-hand").append('<span class="emoji">&#128591;</span>');for(let a=128512;a<=128590;a++)$(".emoji-smiley").append('<span class="emoji">&#'+a+";</span>");$(".emoji").on("click",function(){let a=$(this).text(),t=$(".chat-input-text").val();$(".chat-input-text").val(t+a)}),$(".btn-emoji").on("click",function(){$(".emoji-container").toggle();let a=$(this).text();$(this).text("insert_emoticon"==a?"close":"insert_emoticon")}),$(".chat-user-box").on("click",function(){sessionStorage.setItem("chat-scroll","go"),$(".chat-panel").show(),$(".chat-start").html('<div class="progress"><div class="indeterminate"></div></div>'),$(".notif-pesan").css("right","-500px"),$(".chat-user-box").css("background-color","#fff"),$(this).css("background-color","#a8d6ff"),setTimeout(()=>{$(".chat-input").css("display","flex").addClass("fade-in-fwd")},500);let a=$(this).find(".chat-user-name").text(),t=$(this).find(".chat-user-name").data("u_token"),e=$(this).find(".chat-user-name").data("penerima"),i=$(this).find(".chat-user-name").data("kanal"),n=$(this).find(".chat-user-name").data("jabatan"),s=$(this).find(".chat-user-name").data("foto");$("#user-foto").attr("src",s).removeClass("hide"),$("#chat-with").text(a),$("#user-jabatan").text(n),$(".kanal").val(i),$(".penerima").val(e),$(".u_token").val(t),$(".user_chat_id").val(e),$(".chat_kanal").val(i),fetch_pesan()}),$(".chat-btn").on("click",function(){kirimPesan(),$(".send-loader").removeClass("hide"),$(".chat-btn").addClass("hide")}),$(".back-chat").on("click",function(){$(".chat-panel").hide()})}),$(document).ready(function(){$(".barang_ktg, .barang_mrk").on("change",function(){let a=$(".barang_ktg option:selected").text(),t=$(".barang_mrk option:selected").text(),e=$(".barang_tipe").val();$(".barang_nama").val();$(".barang_nama").val(a+" - "+t+" "+e)}),$(".barang_tipe").on("keyup",function(){let a=$(".barang_ktg option:selected").text(),t=$(".barang_mrk option:selected").text(),e=$(".barang_tipe").val();$(".barang_nama").val();$(".barang_nama").val(a+" - "+t+" "+e)}),$(".btn-tambah-barang").on("click",function(){let a=$(this).data("action");$(".form-inv-barang").attr("action",a),$("#modal-title-barang").text("Tambah Barang"),$(".select2-barang").val(null).trigger("change"),$(".barang_tipe").val(null),$(".barang_nama").val(null),$(".barang_jumlah").val(null)}),$(".btn-edit-barang, .btn-hapus-barang").on("click",function(){$("#modal-title-barang").text("Edit Barang");let a=$(this).data("action");$(".form-inv-barang").attr("action",a);let t=$(this).data("barang_id"),e=$(this).data("barang_nama"),i=$(this).data("kategori_id"),n=$(this).data("merek_id"),s=$(this).data("barang_tipe"),l=$(this).data("barang_jumlah");$(".barang_id").val(t),$(".barang_ktg").val(i),$(".barang_mrk").val(n),$(".barang_jumlah").val(l),$(".select2-barang").trigger("change"),$(".barang_tipe").val(s);let o=$(".barang_ktg option:selected").text(),r=$(".barang_mrk option:selected").text();$(".barang_nama").val(o+" - "+r+" "+s),$(".barang_nama_hapus").val(e),$(".txt-barang").text(e)}),$(".btn-edit-kategori, .btn-hapus-kategori").on("click",function(){let a=$(this).data("kategori_id"),t=$(this).data("kategori_nama");$(".kategori_id").val(a),$(".kategori_nama").val(t),$(".txt-kategori").text(t)}),$(".btn-edit-merek, .btn-hapus-merek").on("click",function(){let a=$(this).data("merek_id"),t=$(this).data("merek_nama");$(".merek_id").val(a),$(".merek_nama").val(t),$(".txt-merek").text(t)}),$(".btn-hapus-laporan").on("click",function(){let a=$(this).data("laporan_id"),t=$(this).data("laporan_nama");$(".laporan_id").val(a),$(".laporan_nama").val(t),$(".txt-laporan").text(t)}),$(".tgl-laporan-inv").on("change",function(){$(".tanggal_laporan").val($(this).val()),$(".btn-simpan-laporan").attr("type","submit")}),$(".btn-simpan-laporan").on("click",function(){""==$(".tanggal_laporan").val()&&tampilNotifikasiAjax("orange-gradient","warning","Tanggal belum diisi!")}),$(".btn-add-komponen").on("click",function(){$(".input-komponen").append('<div class="select2-wrapper"></div>'),$(".select-komponen .select2-komponen:first-child").clone().appendTo($(".input-komponen").children().last()),$(".select2-komponen").select2({minimumResultsForSearch:10})}),$(".btn-pc").on("click",function(){let a=$(this).data("pc_id"),t=$(this).data("pc_nama"),e=$(this).data("pck_nama"),i=$(this).data("pck_id"),n=$(this).data("barang_id");$(".pc_id").val(a),$(".pck_id").val(i),$(".pc_nama").val(t),$(".pck_nama").val(e),$(".txt-pc").text(t),$(".txt-komponen-pc").text(e),$(".pc_komp").val(n),$(".pc_komp").trigger("change")})}),$(document).ready(function(){$(".btn-upload").on("click",function(){$(".file-upload").click()}),$(".file-upload").change(function(){1==cekConfigFoto(this)&&readURL(this)}),$(".cancel-profil").on("click",function(){let a=$(this).data("foto");$(".preview-image").attr("src",a),$(".hidden-image").attr("src",a),$(".confirm-profil").addClass("hide"),$(".file-upload").val("")}),$(".ok-profil").on("click",function(){$(".confirm-profil").addClass("hide"),$(".preview-image").css("filter","blur(10px)"),$(".myloader-text").text("Mengupload . . .").removeClass("hide"),$(".myloader").removeClass("hide");let a=new FormData($("#upload-form")[0]),t=$(".file-upload")[0].files[0],e=$("#foto-nama").val();a.append("file",t),a.append("foto_nama",e),$.ajax({url:"profil/uploadFoto",type:"POST",data:a,cache:!1,contentType:!1,processData:!1,success:function(a){$(".file-upload").val(null),"gagal"!=a?setTimeout(()=>{$("#foto-nama").val(a),$("img.circle").attr("src",$(".preview-image").attr("src"))},2e3):tampilNotifikasiAjax("orange-gradient","warning","Upload foto gagal"),setTimeout(()=>{$(".myloader-text").text("Loading . . .").addClass("hide"),$(".myloader").addClass("hide"),$(".preview-image").css("filter","none"),tampilNotifikasiAjax("blue-gradient","info_outline","Foto profil berhasil diubah")},2e3)}})}),$("#toggle-profil").on("click",function(){$(this).hasClass("tombol-primary")?($(this).css({"background-color":"transparent"}).removeClass("tombol-primary").removeClass("waves-light"),$(this).children("i").text("sync"),$(this).children("span").text("Batal"),$(".btn-tambah").removeClass("hide"),$(".input-profil").prop("disabled",!1)):($(this).css({"background-color":"transparent"}).addClass("tombol-primary").addClass("waves-light"),$(this).children("i").text("edit"),$(this).children("span").text("Edit Profil"),$(".btn-tambah").addClass("hide"),$(".input-profil").prop("disabled",!0),batalEditProfil())}),$(".btn-upload-tugas").on("click",function(){$("#image-id").val("-"),$("#image-edit").val("-"),$(".file-upload-tugas").click()}),$(".file-upload-tugas").change(function(){let a=$("#image-id").val();1==cekConfigFoto(this)&&("-"!=a?($("#action-foto-"+a).hide(),$("#foto-tugas-"+a).css("filter","blur(10px)"),$("#myloader-"+a).removeClass("hide")):($(".preview-wrapper, .myloader").removeClass("hide"),$(".preview-image").css("filter","blur(10px)")),readTugas(this))}),$(document).on("click",".delete-foto-tugas",function(){let a=$(this).data("id"),t=$(this).data("gambar");$("#action-foto-"+a).hide(),$("#foto-tugas-"+a).css("filter","blur(10px)"),$("#myloader-"+a).removeClass("hide"),$.ajax({url:"asisten_tugas/hapusFoto",type:"POST",data:{id:a,gambar:t},success:function(t){"gagal"!=t?setTimeout(()=>{$("#img-wrapper-"+a).remove()},1e3):(tampilNotifikasiAjax("orange-gradient","warning","Hapus foto gagal"),$("#action-tugas-"+a).show(),$("#foto-tugas-"+a).css("filter","none"),$("#myloader-"+a).addClass("hide"))}})}),$(document).on("click",".edit-foto-tugas",function(){let a=$(this).data("id"),t=$(this).data("gambar");$("#image-id").val(a),$("#image-edit").val(t),$(".file-upload-tugas").click()})});var pusher=new Pusher("bf535588d7d38b92fa01",{cluster:"ap1"}),channel=pusher.subscribe("my-channel");channel.bind("my-event",function(){let a=$(".penerima").val();$(".kanal").val();"chat"!=currentPath?cek_pesan_fetch():""==a?cek_pesan_fetch():fetch_pesan()});