var path=window.location.pathname.split("/"),currentPath=path[path.length-1];function showLoader(a){$(a).html('<img src="../assets/images/loader/loader.gif" alt="loading" height="22">')}function uploadFotoInfo(){let a=$("#in-edit").val(),t=new FormData($("#upload-form")[0]),e=$(".file-upload-info")[0].files[0];$(".btn-upload-info").prop("disabled",!0).css("cursor","wait"),t.append("file",e),$.ajax({url:"pengumuman/uploadFoto",type:"POST",data:t,cache:!1,contentType:!1,processData:!1,success:function(t){$(".file-upload-info").val(null);let e=t.split("|");"tambah"==e[0]?($(".preview-wrapper, .myloader").addClass("hide"),$(".preview-image").css("filter","none"),1==a?$("#img-preview-edit").append(e[1]):$("#img-preview-tambah").append(e[1]),$(".materialboxed").materialbox()):"edit"==e[0]?($("#image-id").val("-"),$("#image-edit").val("-"),$("#edit-"+e[1]).data("gambar",e[3]),$("#hapus-"+e[1]).data("gambar",e[3]),setTimeout(()=>{$("#foto-info-"+e[1]).attr("src",e[2]),$("#foto-info-"+e[1]).css("filter","none"),$("#action-foto-"+e[1]).show(),$("#myloader-"+e[1]).addClass("hide")},1e3)):($("#action-foto-"+e[1]).show(),$("#myloader-"+e[1]).addClass("hide"),tampilNotifikasiAjax("orange-gradient","warning","Upload foto gagal")),$(".btn-upload-info").prop("disabled",!1).css("cursor","pointer")}})}function readInfo(a){if(a.files&&a.files[0]){let t=new FileReader;t.onload=function(a){$("#hidden-image").attr("src",a.target.result),$(".preview-image").attr("src",a.target.result),setTimeout(()=>{cekDimensiFotoInfo(a.target.result)},500)},t.readAsDataURL(a.files[0])}}function cekConfigFoto(a){let t=["jpeg","jpg","png","webp"];return-1==$.inArray($(a).val().split(".").pop().toLowerCase(),t)?(tampilNotifikasiAjax("orange-gradient","warning","Format foto tidak didukung. Pastikan foto berformat "+t.join(", ")),0):a.files[0].size>2e6||a.files[0].fileSize>2e6?(tampilNotifikasiAjax("orange-gradient","warning","Ukuran foto terlalu besar. Maksimal 2MB"),0):1}function cekDimensiFotoInfo(a){let t=$("#image-id").val();const e=document.getElementById("hidden-image");e.naturalWidth!==e.naturalHeight?(tampilNotifikasiAjax("orange-gradient","warning","Lebar dan tinggi foto tidak sama. Foto terpilih = "+e.naturalWidth+"x"+e.naturalHeight),$(".file-upload-info").val(null),$(".preview-wrapper, .myloader").addClass("hide"),$("#foto-info-"+t).css("filter","none"),$("#action-foto-"+t).show(),$("#myloader-"+t).addClass("hide")):e.naturalWidth>1080||e.naturalHeight>1080?(tampilNotifikasiAjax("orange-gradient","warning","Lebar dan tinggi foto terlalu besar. Maksimal 1080x1080"),$(".file-upload-info").val(null),$(".preview-wrapper, .myloader").addClass("hide"),$("#foto-info-"+t).css("filter","none"),$("#action-foto-"+t).show(),$("#myloader-"+t).addClass("hide")):uploadFotoInfo()}function kirimPesan(){sessionStorage.setItem("chat-scroll","go");let a=$(".chat-input-text").val(),t=$(".kanal").val(),e=$(".penerima").val(),s=$(".pengirim").val(),i=$(".u_token").val();""==a?$(".chat-input-text").focus():$.ajax({type:"POST",url:"chat/kirim_pesan",data:{pesan:a,kanal:t,penerima:e,pengirim:s},success:function(){fetch_pesan(),$(".send-loader").addClass("hide"),$(".chat-btn").removeClass("hide"),$(".chat-input-text").val("").css("height","49px"),kirimNotifikasiPesan(i,a,t)}})}function kirimNotifikasiPesan(a,t,e){$.ajax({type:"POST",url:"chat/kirimNotifikasi",data:{token:a,pesan:t,kanal:e},success:function(a){console.log(a)}})}function fetch_pesan(){let a=$(".user_chat_id").val(),t=$(".chat_kanal").val();$.ajax({type:"GET",url:"chat/fetch_pesan?penerima="+a+"&kanal="+t,dataType:"json",success:function(t){let e="",s="",i="",n=t[0],l=t[1],o=t[3],c=t[4];if("nouser"!=a){for(let a=0;a<o.length;a++){let t=o[a].pesan_user.split("-"),l=t[0].split("_"),d=o[a].pesan_kanal,r="",$=a-1;$<0&&($=0);let u=o[$].date_created.split("-"),m=o[a].date_created.split("-"),p=m[0];m[0]==c&&(p="HARI INI");let h='<div class="center-align"><span class="chat-tanggal">'+p+"</span></div>";"dosen"==l[0]&&(r='style="color:#3671dc;font-size:14px"');let f='<div class="nama-pengirim" '+r+">"+o[a].pesan_nama_pengirim+"</div>";t[0]==n?(s="chat-text-right",f=""):s="chat-text-left",m[0]==u[0]&&a>0&&(h=""),"-"==d&&(f="",i=t[0]==n?null==o[a].id?'<i class="material-icons right light-blue-text text-lighten-2 pesan-status" style="font-size:20px">done_all</i>':'<i class="material-icons right grey-text text-lighten-1 pesan-status" style="font-size:20px">done_all</i>':""),e+=h+'<div class="'+s+" "+n+'"><span class="pesan">'+f+o[a].pesan_isi+"<br>"+i+"<small>"+m[1]+"</small></span></div>"}$(".chat-start").html(e),"go"==sessionStorage.getItem("chat-scroll")&&$(".chat-start").scrollTop(100*$(".chat-start").height()),$(".last_"+l).css("font-weight","400"),o.length>0&&$(".last_"+l).text(o[o.length-1].pesan_isi),$(".jml_"+l).addClass("hide"),$(".read_"+l).addClass("hide"),sessionStorage.setItem("chat-scroll","stop")}cek_pesan_fetch()}})}function cek_pesan_fetch(){let a=$("#jml-notif").val(),t=$("#jml-ticketing").val(),e=$(".penerima").val();$.ajax({type:"GET",url:"chat/cek_pesan",dataType:"json",success:function(s){let i=s[0],n=s[1],l=s[2],o="";for(let a=0;a<n.length;a++)o+='<div class="p-pesan"><img src="'+n[a].foto+'" alt="profil"><div><a class="p-link nav__link" data-user="'+n[a].pesan_pengirim+'" href="'+n[a].link+'"><span class="p-pengirim">'+n[a].pesan_nama_pengirim+'</span><span class="p-jumlah-pesan">'+n[a].jumlah+" pesan masuk</span></a></div></div>";if($("#jml-notif").val(i),$("#counter").text(i),i>0){let t=s[3].link,n=s[3].pesan_pengirim,l=s[3].pesan_isi,c=s[3].foto,d=s[3].pesan_nama_pengirim,r=s[3].jumlah;$(".pulse-pesan").removeClass("hide"),$("#notif-pesan").html(o),$(".read_"+n).addClass("hide"),$(".last_"+n).css("font-weight","600").text(l),$(".jml_"+n).text(r).removeClass("hide"),i>a&&n!=e&&($(".notif-pesan").css("right","-500px"),setTimeout(()=>{$(".np-link").attr("href",t),$(".np-link").data("user",n),$(".np-foto").attr("src",c),$(".np-pengirim").text(d),$(".np-pesan").text(r+" pesan masuk"),$(".notif-pesan").css("right","20px")},1e3))}else $("#notif-pesan").html('<div style="padding: 12px; text-align: center">Tidak ada pesan</div>'),$(".pulse-pesan").addClass("hide");l>t&&kirimNotifikasiTicket("pesan"),l>0?$(".pulse-ticket").removeClass("hide"):$(".pulse-ticket").addClass("hide"),$("#jml-ticketing").val(l),"chat"==currentPath&&$(".p-link, .np-link").removeAttr("href").removeClass("nav__link")}})}function getAsisten(){let a=location.href.split("?");2==a.length&&setTimeout(()=>{$("#"+a[1]).css("background-color","#a8d6ff"),$(".chat-contact").scrollTop($("#"+a[1]).offset().top-190),$("#"+a[1]).click()},100)}function toAsisten(a){$(".chat-contact").scrollTop($("#"+a).offset().top-190),$("#"+a).click()}function kirimNotifikasiTicket(a){$.ajax({type:"POST",url:"ticketing/notifikasiTicketing",data:{kanal:a},success:function(a){console.log(a)}})}function kirimNotifikasiPesanTicket(a,t){$.ajax({type:"POST",url:"ticketing/kirimNotifikasi",data:{npm:a,pesan:t},success:function(a){console.log(a)}})}$(".alert-password").hide(),$(document).ready(function(){$(".status_ujian").on("click",function(){let a=$(this).val();$.ajax({type:"POST",url:"aplikasi/statusUjian",data:{status:a},success:function(a){$(".status_ujian").val(a)}})}),$(".status_ksa").on("click",function(){let a=$(this).val();$.ajax({type:"POST",url:"aplikasi/statusKsa",data:{status:a},success:function(a){$(".status_ksa").val(a)}})}),$(".status_ksm").on("click",function(){let a=$(this).val();$.ajax({type:"POST",url:"aplikasi/statusKsm",data:{status:a},success:function(a){$(".status_ksm").val(a)}})}),$(".form-hapus-pesan").submit(function(){let a=$(".password").val();return $("button").prop("disabled",!0).css("cursor","wait"),$.ajax({type:"POST",url:"aplikasi/hapusPesan",data:"password="+a,success:function(a){"salah"==a?($(".password").val(""),$(".alert-password").slideDown(100),setTimeout(function(){$(".alert-password").slideUp(100)},3e3)):($(".modal").modal("close"),$(".alert-password").hide(),$(".password").val(""),tampilNotifikasiAjax("blue-gradient","info_outline","Data pesan berhasil dihapus")),$("label").removeClass("active"),$("button").prop("disabled",!1).css("cursor","pointer")}}),!1}),$(".form-hapus-ticket").submit(function(){let a=$(".password2").val();return $("button").prop("disabled",!0).css("cursor","wait"),$.ajax({type:"POST",url:"aplikasi/hapusTicketing",data:"password="+a,success:function(a){"salah"==a?($(".password2").val(""),$(".alert-password").slideDown(100),setTimeout(function(){$(".alert-password").slideUp(100)},3e3)):($(".modal").modal("close"),$(".alert-password").hide(),$(".password2").val(""),tampilNotifikasiAjax("blue-gradient","info_outline","Data E-ticketing berhasil dihapus")),$("label").removeClass("active"),$("button").prop("disabled",!1).css("cursor","pointer")}}),!1}),$(".form-reset-pembayaran").submit(function(){let a=$(".password1").val();return $("button").prop("disabled",!0).css("cursor","wait"),$.ajax({type:"POST",url:"aplikasi/resetPembayaran",data:"password="+a,success:function(a){"salah"==a?($(".password").val(""),$(".alert-password").slideDown(100),setTimeout(function(){$(".alert-password").slideUp(100)},3e3)):($(".modal").modal("close"),$(".alert-password").hide(),$(".password").val(""),tampilNotifikasiAjax("blue-gradient","info_outline","Reset pembayaran praktikum berhasil")),$("label").removeClass("active"),$("button").prop("disabled",!1).css("cursor","pointer")}}),!1})}),$(document).ready(function(){function a(){let a=$(".npm-mhs").val();$.ajax({type:"GET",url:"ticketing/fetch_pesan?npm="+a,dataType:"json",success:function(e){let s="",i="",n="",l=e[0],o=e[1];for(let a=0;a<l.length;a++){let t=l[a].pengirim,e=a-1;e<0&&(e=0);let c=l[e].date_created.split("-"),d=l[a].date_created.split("-"),r=d[0];d[0]==o&&(r="HARI INI");let $='<div class="center-align"><span class="chat-tanggal">'+r+"</span></div>";"admin"==t?(i="chat-text-right",n=1==l[a].pesan_status?'<i class="material-icons right light-blue-text text-lighten-2 pesan-status" style="font-size:20px">done_all</i>':'<i class="material-icons right grey-text text-lighten-1 pesan-status" style="font-size:20px">done_all</i>'):(i="chat-text-left",n=""),d[0]==c[0]&&a>0&&($=""),s+=$+'<div class="'+i+'"><span class="pesan">'+l[a].pesan+"<br>"+n+"<small>"+d[1]+"</small></span></div>"}$(".chat-content").html(s),"go"==sessionStorage.getItem("chat-scroll")&&$(".modal-content").scrollTop(100*$(".modal-content").height()),$(".tr-"+a).removeClass("green"),$(".jml-"+a).html('<span class="badge-status badge-not">0</span>'),l.length>0&&$(".last_msg_"+a).text(l[l.length-1].pesan),sessionStorage.setItem("chat-scroll","stop"),t()}})}function t(){$.ajax({type:"GET",url:"ticketing/cekPesanMhs",dataType:"json",success:function(a){let t=a[0],e=a[1];for(let a=0;a<e.length;a++)$(".no-"+e[a].npm).text(a+1),$(".last_msg_"+e[a].npm).text(e[a].pesan),t[a]<1?$(".jml-"+e[a].npm).html('<span class="badge-status badge-not">'+t[a]+"</span>"):($(".jml-"+e[a].npm).html('<span class="badge-status badge-ok">'+t[a]+"</span>"),$(".jml-"+e[a].npm).parent().addClass("green lighten-5"));let s=$(".jmlPesanMhs").val();e.length>s&&0!=s&&$(".tbody-pesan-mhs").prepend('<tr class="tr-data tr-pesan modal-trigger tr-'+e[0].npm+' green lighten-5 " data-target="modalPesan" data-kelas="'+e[0].kelas_nama+'" data-npm="'+e[0].npm+'" data-nama="'+e[0].nama+'"><td class="center no-'+e[0].npm+'">1</td><td>'+e[0].npm+"</td><td>"+e[0].nama+'</td><td><span class="last_msg_'+e[0].npm+'">'+e[0].pesan+'</span></td><td class="jml-'+e[0].npm+'"><span class="badge-status badge-ok">'+t[0]+"</span></td></tr>"),$(".jmlPesanMhs").val(e.length)}})}$(".btn-pindah-shift").on("click",function(){let a=$(this).data("ticket_id"),t=$(this).data("ticket_kode"),e=$(this).data("npm"),s=$(this).data("nama"),i=$(this).data("kelas"),n=$(this).data("matkum_id"),l=$(this).data("shift_asal").toUpperCase(),o=$(this).data("shift_tujuan"),c=$(this).data("ticket_deskripsi"),d=$(this).data("ticket_status"),r=$(this).data("date_created");$("#btnTabPesan").data("npm",e),$(".tgl_ticket").text(": "+r),$(".ticket_kode").text(": "+t),$(".npm").text(": "+e),$(".nama").text(": "+s),$(".kelas").text(": "+i),$(".ticket_deskripsi").text(": "+c),$(".shift_asal").html("<option>"+l+"</option>"),function(a,t,e){$.ajax({type:"GET",url:"ticketing/fetch_jadwal?matkum_id="+a+"&shift_asal="+e,success:function(a){let e=a.split("|");$(".shift_tujuan").html(e[0]),$(".shift_tujuan").val(t),$("#jadwal-ticket").html(e[1]),$("#"+t).css("background","powderblue")}})}(n,o,l),$(".ticket_id").val(a),$(".ticket_status").val(d),$(".select2, .select2-no-search, .select2-with-image").trigger("change")}),$(".btn-simpan-pindah").on("click",function(){let a=$(".shift_tujuan").val(),t=$(".ticket_id").val(),e=$(".ticket_status").val();showLoader("#status"+t),$.ajax({type:"POST",url:"ticketing/proses_ticket",data:{shift_tujuan:a,ticket_status:e,ticket_id:t},success:function(a){let e=a.split("|");$("#btn"+t).data("ticket_status",e[1]),$("#btn"+t).data("shift_tujuan",e[2]),$(".modal").modal("close"),setTimeout(()=>{$("#status"+t).html(e[0])},1e3)}})}),$(".tbody-pesan-mhs").on("click",".tr-pesan",function(){sessionStorage.setItem("chat-scroll","go"),$(".chat-content").html('<div class="progress"><div class="indeterminate"></div></div>');let t=$(this).data("npm"),e=$(this).data("nama"),s=$(this).data("kelas");$(".nama-pengirim").html(e),$(".kelas-pengirim").html(t+" | "+s),$(".npm").val(t),$(".npm-mhs").val(t),$(".nama").val(e),a(),setTimeout(()=>{$(".input-msg").focus()},100)}),$(".btn-send").on("click",function(){sessionStorage.setItem("chat-scroll","go");let t=$(".npm").val(),e=$(".nama").val(),s=$(".input-msg").val();""==s?$(".input-msg").focus():($(".send-loader").removeClass("hide"),$(".btn-send").addClass("hide"),$.ajax({type:"POST",url:"ticketing/balas_pesan",data:{npm:t,nama:e,pesan:s},success:function(){a(),$(".send-loader").addClass("hide"),$(".btn-send").removeClass("hide"),$(".input-msg").val("").css("height","49px"),kirimNotifikasiPesanTicket(t,s)}}))}),$(".btn-send2").on("click",function(){sessionStorage.setItem("chat-scroll","go");let t=$(".npm").val(),e=$(".nama").val(),s=$(".input-msg2").val();""==s?$(".input-msg2").focus():($(".send-loader").removeClass("hide"),$(".btn-send2").addClass("hide"),$.ajax({type:"POST",url:"ticketing/balas_pesan",data:{npm:t,nama:e,pesan:s},success:function(){a(),$(".send-loader").addClass("hide"),$(".btn-send2").removeClass("hide"),$(".input-msg2").val("").css("height","49px"),kirimNotifikasiPesanTicket(t,s)}}))}),$("#btnTabTicket").on("click",function(){let a=sessionStorage.getItem("scroll-pos");setTimeout(()=>{$(".modal-content").scrollTop(a)},10)}),$("#btnTabPesan").on("click",function(){$(".chat-content").html('<div class="progress"><div class="indeterminate"></div></div>');let t=sessionStorage.getItem("scroll");sessionStorage.setItem("scroll-pos",t);let e=$(this).data("npm");$(".npm").val(e),$(".npm-mhs").val(e),a(),setTimeout(()=>{$(".input-msg2").focus()},100)}),$("#modal-det").scroll(function(){let a=document.getElementById("modal-det").scrollTop;sessionStorage.setItem("scroll",a)}),"ticketing"==currentPath&&(t(),setInterval(()=>{a()},1e4))}),$(document).ready(function(){$(".form-jadwal").submit(function(){return $.ajax({type:"POST",url:$(this).attr("action"),data:$(this).serialize(),success:function(a){let t=a.split("|");"sukses"==t[0]?($(".datatable").prepend(t[2]),$(".form-jadwal").trigger("reset"),$(".select2, .select2-no-search, .select2-with-image").val(null).trigger("change"),tampilNotifikasiAjax("success-gradient","check_circle",t[1]),$(".modal-content").scrollTop(0)):(tampilNotifikasiAjax("orange-gradient","warning",t[1]),$("#jadwal_kode_tambah").focus())}}),!1}),$("#form-edit-jadwal").submit(function(){return $.ajax({type:"POST",url:$(this).attr("action"),data:$(this).serialize(),success:function(a){let t=a.split("|");"gagal"==t[0]?(tampilNotifikasiAjax("orange-gradient","warning",t[1]),$("#jadwal_kode_edit").focus(),$(".modal-content").scrollTop(0)):location.reload()}}),!1}),$(".datatable, .datatable-nopage").on("click",".status-jadwal",function(){let a=$(this).data("jadwal_id"),t=$(this).data("jadwal_kode"),e=$("#"+a+" .badge-status").html();return showLoader("#"+a),$.ajax({type:"POST",url:"penjadwalan/statusJadwal",data:{jadwal_id:a,jadwal_kode:t,status:e},success:function(t){setTimeout(()=>{$("#"+a).html(t)},1e3)}}),!1}),$(document).on("click",".btn-edit-jadwal, .btn-hapus-jadwal",function(){let a=$(this).data("jadwal_id"),t=$(this).data("periode_id"),e=$(this).data("jadwal_kode"),s=$(this).data("matkum_id"),i=$(this).data("kelas_kode"),n=$(this).data("asisten_1"),l=$(this).data("asisten_2"),o=$(this).data("jadwal_hari"),c=$(this).data("jadwal_jam").split("-"),d=$(this).data("ruangan_id"),r=$(this).data("dosen_id");$(".jadwal_id").val(a),$(".jadwal_kode").val(e),$(".edit-label").addClass("active"),$(".txt-jadwal").text(e),$(".matkum_id").val(s),$(".kelas_kode").val(i),$(".asisten_1").val(n),$(".asisten_2").val(l),$(".jadwal_hari").val(o),$(".jam_mulai").val(c[0]),$(".jam_selesai").val(c[1]),$(".periode_id").val(t),$(".ruangan_id").val(d),$(".dosen_id").val(r),$(".custom-modal-title").text("Edit Jadwal"),$(".select2, .select2-no-search, .select2-with-image").trigger("change")})}),$(document).ready(function(){$(".form-tambah-mahasiswa").submit(function(){let a=$("#kelas_kode").val();return $.ajax({type:"POST",url:$(this).attr("action"),data:$(this).serialize(),success:function(t){let e=t.split("|");"sukses"==e[0]?($(".datatable-serverside-mhs").DataTable().ajax.reload(),$("#add-nama").val(""),$(".select2, .select2-no-search, .select2-with-image").val(a).trigger("change"),tampilNotifikasiAjax("success-gradient","check_circle",e[1])):tampilNotifikasiAjax("orange-gradient","warning",e[1]),window.scrollTo({top:0,behavior:"smooth"})}}),!1}),$("#form-edit-mahasiswa").submit(function(){return $.ajax({type:"POST",url:$(this).attr("action"),data:$(this).serialize(),success:function(a){let t=a.split("|");"gagal"==t[0]?(tampilNotifikasiAjax("orange-gradient","warning",t[1]),$("#npm_baru").focus(),$(".modal-content").scrollTop(0)):location.reload()}}),!1}),$(".datatable-serverside-mhs").on("click",".status-mhs",function(){let a=$(this).attr("id"),t=$("#"+a+" .badge-status").html();return showLoader("#"+a),$.ajax({type:"POST",url:"mahasiswa/statusMhs",data:{npm:a,status:t},success:function(t){setTimeout(()=>{$("#"+a).html(t)},1e3)}}),!1}),$(".datatable-serverside-mhs").DataTable({oLanguage:{sProcessing:'<br><div class="center-align"><div class="preloader-wrapper small active"><div class="spinner-layer spinner-blue-only"><div class="circle-clipper left"><div class="circle"></div></div><div class="gap-patch"><div class="circle"></div></div><div class="circle-clipper right"><div class="circle"></div></div></div></div><br>Memuat data ...</div>'},ordering:!1,dom:"trip",pageLength:100,order:[],processing:!0,serverSide:!0,ajax:{url:"mahasiswa/fetch_mahasiswa",type:"POST"},columns:[{aaData:"no"},{aaData:"npm"},{aaData:"nama"},{aaData:"kelas_nama"},{aaData:"status_mhs"},{aaData:"aksi"}],drawCallback:function(){$(".btn-edit-mhs, .btn-hapus-mhs, .btn-password-mhs").on("click",function(){let a=$(this).data("mhs_id"),t=$(this).data("npm"),e=$(this).data("nama"),s=$(this).data("kelas_kode");$(".txt-nama").html(e),$(".mhs_id").val(a),$(".npm").val(t),$(".nama").val(e),$(".kelas_kode").val(s),$(".select2, .select2-no-search, .select2-with-image").trigger("change")})},createdRow:function(a,t){'<div class="hide"></div>'==t[0]&&($(a).addClass("lighten-5"),$(a).addClass("green"))}})}),$(document).ready(function(){$(".input-nilai").hide(),$(".tr-nilai-ujian").on("click",function(){let a=$(this).attr("id");$(".txt-n-tugas"+a).hide(),$(".inp-n-tugas"+a).show(),$(".txt-n-ujian"+a).hide(),$(".inp-n-ujian"+a).show(),setTimeout(function(){$(".inp-n-tugas"+a).css("width","50px"),$(".inp-n-ujian"+a).css("width","50px")},10)}).change(function(){let a=$(this).attr("id"),t=$(".jadwal_kode").val(),e=$(".p_kehadiran").val(),s=$(".p_tugas").val(),i=$(".p_ujian").val(),n=$(".kehadiran"+a).html(),l=($(".tugas"+a).html(),$(".inp-n-tugas"+a).val()),o=$(".inp-n-ujian"+a).val();showLoader(".txt-n-tugas"+a),showLoader(".txt-n-ujian"+a);let c=n*e/100+l*s/100+o*i/100;c=c.toString(),$.ajax({type:"POST",url:"penilaian/penilaian",data:"npm="+a+"&jadwal_kode="+t+"&nilai_tugas="+l+"&nilai_ujian="+o,success:function(t){let e=t.split("|");setTimeout(()=>{$(".txt-n-tugas"+a).html(e[0]),$(".txt-n-ujian"+a).html(e[1]),$(".total"+a).html(c)},1e3)}})}),$(document).mouseup(function(){$(".hilang").hide(),$(".muncul").show()}),$(".btn-edit-persentase").on("click",function(){let a=$(this).data("p_kehadiran"),t=$(this).data("p_tugas"),e=$(this).data("p_ujian");$(".p_kehadiran").val(a),$(".p_tugas").val(t),$(".p_ujian").val(e)})}),$(document).ready(function(){$(".kehadiran").on("click",function(){let a=$(this).attr("id"),t=$("#"+a+" .badge-status").html(),e=$(".jadwal_kode").val(),s=$(".pertemuan").val(),i=$(".tgl").val();return showLoader("#"+a),$.ajax({type:"POST",url:"absensi/do_absen",data:"npm="+a+"&kehadiran="+t+"&jadwal_kode="+e+"&pertemuan="+s+"&tgl="+i,success:function(t){setTimeout(()=>{$("#"+a).html(t)},1e3)}}),!1}),$(".kehadiran-asisten").on("click",function(){let a=$(this).attr("id"),t=$("#"+a+" .badge-status").html(),e=$(".jadwal_kode").val(),s=$(".pertemuan").val(),i=$(".tgl").val();return showLoader(".asisten"+a),$.ajax({type:"POST",url:"absensi/do_absen_asisten",data:"asisten_id="+a+"&kehadiran="+t+"&jadwal_kode="+e+"&pertemuan="+s+"&tgl="+i,success:function(t){setTimeout(()=>{$(".asisten"+a).html(t)},1e3)}}),!1})}),$(document).ready(function(a){$(".datatable, .datatable-nopage").on("click",".status-bayar",function(){let a=$(this).attr("id"),t=$("#"+a+" .badge-status").html(),e=parseInt($(".lunas").html()),s=parseInt($(".belum").html());return showLoader("#"+a),$.ajax({type:"POST",url:"pembayaran/statusBayar",data:{npm:a,status:t},success:function(t){let i=t.split("|");setTimeout(()=>{"lunas"===i[0]?($("#"+a).html(i[1]),$(".lunas").html(e+1),$(".belum").html(s-1)):($("#"+a).html(i[1]),$(".lunas").html(e-1),$(".belum").html(s+1))},1e3)}}),!1})}),$(document).ready(function(a){$(".foto-asisten").on("click",function(){$("#asisten_foto").val($(this).data("foto")),$(".foto-asisten").css("max-width","30px"),$(this).css("max-width","50px")}),$(".form-asisten").submit(function(){return $.ajax({type:"POST",url:$(this).attr("action"),data:$(this).serialize(),success:function(a){let t=a.split("|");"sukses"==t[0]?($(".modal").modal("close"),$(".datatable-nopage").prepend(t[2]),$(".form-asisten").trigger("reset"),$(".select2, .select2-no-search, .select2-with-image").val(null).trigger("change"),$(".modal-content").scrollTop(0),tampilNotifikasiAjax("success-gradient","check_circle",t[1]),$(".foto-asisten").css("max-width","50px")):tampilNotifikasiAjax("orange-gradient","warning",t[1])}}),!1}),$("#form-edit-asisten").submit(function(){return $.ajax({type:"POST",url:$(this).attr("action"),data:$(this).serialize(),success:function(a){let t=a.split("|");"gagal"==t[0]?(tampilNotifikasiAjax("orange-gradient","warning",t[1]),$("#username").focus(),$(".modal-content").scrollTop(0)):location.reload()}}),!1}),$(".datatable, .datatable-nopage").on("click",".status-asisten",function(){let a=$(this).attr("id"),t=$(this).data("username"),e=$("#"+a+" .badge-status").html();return showLoader("#"+a),$.ajax({type:"POST",url:"asisten/statusAsisten",data:{asisten_id:a,username:t,status:e},success:function(t){setTimeout(()=>{$("#"+a).html(t)},1e3)}}),!1}),$(document).on("click",".btn-edit-asisten, .btn-hapus-asisten, .btn-password-asisten, .btn-lihat-asisten",function(){let a=$(this).data("asisten_id"),t=$(this).data("asisten_nama"),e=$(this).data("username"),s=$(this).data("jabatan_id"),i=$(this).data("jabatan_nama"),n=$(this).data("alamat"),l=$(this).data("email"),o=$(this).data("tahun_masuk"),c=$(this).data("tahun_keluar"),d=$(this).data("foto"),r=$(this).data("foto_nama"),u=$(this).data("tgl_lahir").split("-");$(".txt-username").html(e),$(".txt-nama").html(t),$(".asisten-nama").html(t),$(".jabatan-nama").html(i),$(".tahun-masuk").html(o),$(".tahun-keluar").html(c),$(".tgl-lahir").html(u[2]+"/"+u[1]+"/"+u[0]),$(".txt-email").html(l),$(".txt-alamat").html(n),$(".foto-modal").attr("src",d),$(".asisten_id").val(a),$(".username").val(e),$(".asisten_nama").val(t),$(".jabatan_id").val(s),$(".alamat").val(n),$(".email").val(l),$(".tgl_lahir").val(u[2]),$(".bulan_lahir").val(u[1]),$(".tahun_lahir").val(u[0]),$(".tahun_masuk").val(o),$(".tahun_keluar").val(c),$(".foto-lama").val(r),$(".select2, .select2-no-search, .select2-with-image").trigger("change")})}),$(document).ready(function(a){$(".foto-dosen").on("click",function(){$("#dosen_foto").val($(this).data("foto")),$(".foto-dosen").css("max-width","30px"),$(this).css("max-width","50px")}),$(".form-dosen").submit(function(){let a=$("#jabatan_id").val();return $.ajax({type:"POST",url:$(this).attr("action"),data:$(this).serialize(),success:function(t){let e=t.split("|");"sukses"==e[0]?($(".datatable-nopage").prepend(e[2]),$(".form-dosen").trigger("reset"),$(".select2, .select2-no-search, .select2-with-image").val(a).trigger("change"),$(".modal-content").scrollTop(0),tampilNotifikasiAjax("success-gradient","check_circle",e[1]),$(".foto-dosen").css("max-width","50px")):tampilNotifikasiAjax("orange-gradient","warning",e[1])}}),!1}),$("#form-edit-dosen").submit(function(){return $.ajax({type:"POST",url:$(this).attr("action"),data:$(this).serialize(),success:function(a){let t=a.split("|");"gagal"==t[0]?(tampilNotifikasiAjax("orange-gradient","warning",t[1]),$("#nidn_baru").focus(),$(".modal-content").scrollTop(0)):location.reload()}}),!1}),$(".datatable, .datatable-nopage").on("click",".status-dosen",function(){let a=$(this).attr("id"),t=$(this).data("nidn"),e=$("#"+a+" .badge-status").html();return showLoader("#"+a),$.ajax({type:"POST",url:"dosen/statusdosen",data:{dosen_id:a,nidn:t,status:e},success:function(t){setTimeout(()=>{$("#"+a).html(t)},1e3)}}),!1}),$(document).on("click",".btn-edit-dosen, .btn-hapus-dosen, .btn-password-dosen, .btn-lihat-dosen",function(){let a=$(this).data("dosen_id"),t=$(this).data("dosen_nama"),e=$(this).data("nidn"),s=$(this).data("jabatan_id"),i=$(this).data("email"),n=$(this).data("foto_nama");$(".txt-dosen").text(t),$(".dosen_id").val(a),$(".nidn").val(e),$(".dosen_nama").val(t),$(".foto-lama").val(n),$(".jabatan_id").val(s),$(".email").val(i),$(".select2, .select2-no-search, .select2-with-image").trigger("change")})}),$(document).ready(function(a){$(".input-nama").keyup(function(){let a=$(this).val();filter=a.replace(/\s/g,"").toLowerCase(),$(".kelas_kode, .input-kode").val(filter),$(".kelas_nama, .input-nama").val(a.toUpperCase())}),$(".datatable, .datatable-nopage").on("click",".status-kelas",function(){let a=$(this).attr("id"),t=$("#"+a+" .badge-status").html();return showLoader("#"+a),$.ajax({type:"POST",url:"kelas/statusKelas",data:{kelas_id:a,status:t},success:function(t){setTimeout(()=>{$("#"+a).html(t)},1e3)}}),!1}),$(".btn-edit-kelas, .btn-hapus-kelas").on("click",function(){let a=$(this).data("kelas_id"),t=$(this).data("kelas_kode"),e=$(this).data("kelas_nama");$(".txt-kelas").text(e),$(".kelas_id").val(a),$(".kelas_kode").val(t),$(".kelas_nama").val(e)})}),$(document).ready(function(){$(".datatable, .datatable-nopage").on("click",".checkbox",function(){let a,t=$(".jadwal_kode").val(),e=$(this).parent().children(".filled-in").data("npm"),s=$(this).parent().children(".filled-in").data("nama"),i=$(this).parent().children(".filled-in").prop("checked"),n=$(this).parent().parent().parent(),l=$(this).parent().parent();return $(this).parent().children(".filled-in").click(),$(".txt-nama").text(s+" | "+e),$(".txt-idp").text(t),$(".checkbox-npm").val(e),$(".checkbox-nama").val(s),showLoader(l),a=1==i?"delete":"add",$.ajax({type:"POST",url:"registrasi/simpanRegistrasi",data:{jadwal_kode:t,npm:e,nama:s,status:a},success:function(a){let t=a.split("|");setTimeout(()=>{"add"==t[0]?(n.addClass("green lighten-5"),l.html(t[1])):"confirm"==t[0]?$("#modalHapusReg").modal("open"):(n.removeClass("green lighten-5"),l.html(t[1]))},1e3)}}),!1}),$("#modalHapusReg").modal({onCloseStart:function(){let a=$(".checkbox-npm").val(),t=$(".checkbox-nama").val();$(".td-checkbox"+a).html('<label><input type="checkbox" class="filled-in" data-nama="'+t+'" data-npm="'+a+'" value="'+a+'" name="npm" checked><span class="checkbox" style="left: 10px"></span></label>')}}),$("#ok-hapus-reg").on("click",function(){$("#modalHapusReg").modal("close");let a=$(".jadwal_kode").val(),t=$(".checkbox-npm").val();return showLoader(".td-checkbox"+t),$.ajax({type:"POST",url:"registrasi/simpanRegistrasi",data:{jadwal_kode:a,npm:t,status:"confirm"},success:function(a){let e=a.split("|");setTimeout(()=>{$(".checkbox-npm").val(""),$(".tr-"+t).removeClass("green lighten-5"),$(".td-checkbox"+t).html(e[1])},1e3)}}),!1})}),$(document).ready(function(){$(".form-pindah-praktikum").submit(function(){if(0==$(".praktikum_tujuan").val())return tampilNotifikasiAjax("orange-gradient","warning","Praktikum tujuan belum dipilih"),!1}),$("#p_tujuan").on("change",function(){let a=$(this).val(),t=$(".pertemuan1").val();$("#pertemuan2").html('<img src="../assets/images/loader/loader.gif" alt="loading..." height="20">'),$.ajax({type:"POST",url:"registrasi/cekPertemuan",data:"jadwal_kode="+a+"&pertemuan1="+t,success:function(t){$(".praktikum_tujuan").val(a);let e=t.split("|");setTimeout(()=>{$("#pertemuan2").html(e[1]),"sukses"==e[0]?$(".mhs").prop("disabled",!1):($(".mhs").prop("disabled",!0),tampilNotifikasiAjax("orange-gradient","warning","Pindah praktikum tidak bisa diproses. Jumlah Pertemuan tidak sama"))},1e3)}})})}),$(document).ready(function(){$(".form-notifikasi").submit(function(){let a=$(this).serialize();return $("button[type=submit]").prop("disabled",!0).css("cursor","wait"),$(".mymodal-loader").removeClass("hide"),setTimeout(()=>{$(".modal-content").scrollTop(5e3)},500),$.ajax({type:"POST",url:$(this).attr("action"),data:a,success:function(a){let t=a.split("|");$(".mymodal-loader").addClass("hide"),$("button[type=submit]").prop("disabled",!1).css("cursor","pointer"),$(".modal").modal("close"),$(".form-notifikasi").trigger("reset"),$(".select2, .select2-no-search, .select2-with-image").val(null).trigger("change"),$("label").removeClass("active"),"sending"==t[0]?tampilNotifikasiAjax("success-gradient","check_circle","Notifikasi info praktikum berhasil dikirim. Terkirim : "+t[1]):tampilNotifikasiAjax("red-gradient","warning","Notifikasi tugas gagal dikirim. Ekstensi GMP tidak terinstal di server")}}),!1}),$(".btn-hapus-info, .btn-kirim-notifikasi, .btn-edit-info").on("click",function(){let a=$(this).data("info_caption");$(".summernote-info").eq(1).summernote("code",a);let t=$(this).data("info_id"),e=$(this).data("info_image"),s=$(this).data("kelas").split(","),i=$(this).data("foto_lama"),n=s.filter(a=>a);$(".info_id").val(t),$(".info-caption").val(a),$(".info-caption-p").text(a),$(".foto-lama").val(i),M.textareaAutoResize($(".info-caption")),$(".preview-image").attr("src",e),$(".kelas_kode").val(n),$(".select2, .select2-no-search").trigger("change")}),$(".btn-buat-info").on("click",function(){let a=$(this).data("info_id");$("#info-id").val(a),$("#in-edit").val(0)}),$(".get-image").on("click",function(){let a=$(this).data("info_id");$("#info-id").val(a),$("#in-edit").val(1),$(".file-upload-info").val(null),function(a,t){$(a).html('<div class="progress"><div class="indeterminate"></div></div>'),$.ajax({type:"GET",url:"pengumuman/fetch_image?info_id="+t,success:function(t){$(a).html(t),$(".materialboxed").materialbox()}})}("#img-preview-edit",a)}),$(".card-info").on({mouseenter:function(){$(this).children(".caption").css("overflow","auto"),$(this).children(".card-info-footer").children(".card-info-action").css("opacity",1)},mouseleave:function(){$(this).children(".caption").css("overflow","hidden").scrollTop(0),$(this).children(".card-info-footer").children(".card-info-action").css("opacity",0)}})}),$(document).ready(function(){$(".catatan-item").on({mouseenter:function(){$(this).children(".catatan-content").css("overflow","auto"),$(this).children(".catatan-footer").children(".catatan-action").css("opacity",1)},mouseleave:function(){$(this).children(".catatan-content").css("overflow","hidden").scrollTop(0),$(this).children(".catatan-footer").children(".catatan-action").css("opacity",0)}}),$(".warna-item").on("click",function(){$(".catatan_warna").val($(this).data("warna")),$(".modal-head,.modal-content,.modal-footer").css("background-color",$(this).data("warna")),$(".warna-item").html(""),$(this).html('<i class="material-icons warna-check">check</i>')}),$(".pin-btn").on("click",function(){0==$(".catatan_status").val()?($(".catatan_status").val(1),$(this).html('<i class="material-icons">push_pin</i>')):($(".catatan_status").val(0),$(this).html('<i class="material-icons-outlined">push_pin</i>'))}),$(".btn-tambah-catatan").on("click",function(){$(".modal-head,.modal-content,.modal-footer").css("background-color","#fafafa"),$(".catatan_warna").val("#ffffff"),$(".catatan_status").val(0),$(".pin-btn").html('<i class="material-icons-outlined">push_pin</i>'),$("#default-warna").html('<i class="material-icons warna-check">check</i>')}),$(".btn-edit-catatan").on("click",function(){let a=$(this).data("catatan_warna"),t=$(this).data("catatan_status");$(".catatan_id").val($(this).data("catatan_id")),$(".catatan_judul").val($(this).data("catatan_judul")),$(".summernote-tentang").eq(1).summernote("code",$(this).data("catatan_isi")),$(".catatan_warna").val(a),$(".catatan_status").val(t),$(".modal-head,.modal-content,.modal-footer").css("background-color",a),$(".warna-item").html(""),$(a).html('<i class="material-icons warna-check">check</i>'),1==t?$(".pin-btn").html('<i class="material-icons">push_pin</i>'):$(".pin-btn").html('<i class="material-icons-outlined">push_pin</i>')}),$(".btn-hapus-catatan").on("click",function(){$(".modal-head,.modal-content,.modal-footer").css("background-color","#fafafa"),$(".catatan_id").val($(this).data("catatan_id"))})}),$(document).ready(function(){$(".datatable, .datatable-nopage").on("click",".status-matkum",function(){let a=$(this).attr("id"),t=$("#"+a+" .badge-status").html();return showLoader("#"+a),$.ajax({type:"POST",url:"matkum/statusMatkum",data:{matkum_id:a,status:t},success:function(t){setTimeout(()=>{$("#"+a).html(t)},1e3)}}),!1}),$(".btn-edit-matkum, .btn-hapus-matkum").on("click",function(){let a=$(this).data("matkum_id"),t=$(this).data("matkum");$(".txt-matkum").text(t),$(".matkum_id").val(a),$(".matkum").val(t)})}),$(document).ready(function(){$(".datatable, .datatable-nopage").on("click",".status-periode",function(){let a=$(this).attr("id"),t=$("#"+a+" .badge-status").html();return showLoader("#"+a),$.ajax({type:"POST",url:"periode/statusPeriode",data:{periode_id:a,status:t},success:function(t){setTimeout(()=>{$("#"+a).html(t)},1e3)}}),!1}),$(".btn-edit-periode, .btn-hapus-periode, .btn-status-periode").on("click",function(){let a=$(this).data("periode_id"),t=$(this).data("periode_nama");$(".txt-periode").html(t),$(".periode_id").val(a),$(".periode_nama").val(t),M.updateTextFields()})}),$(document).ready(function(){$(".btn-edit-ruangan, .btn-hapus-ruangan").on("click",function(){let a=$(this).data("ruangan_id"),t=$(this).data("ruangan_nama"),e=$(this).data("kapasitas"),s=$(this).data("ruangan_pj");$(".txt-ruangan").text(t),$(".ruangan_id").val(a),$(".ruangan_nama").val(t),$(".kapasitas").val(e),$(".ruangan_pj").val(s),M.updateTextFields(),$(".ruangan_pj").val(s),$(".ruangan_pj").trigger("change")})}),$(document).ready(function(){$(".btn-edit-jam, .btn-hapus-jam").on("click",function(){let a=$(this).data("jam_id"),t=$(this).data("jam_nama"),e=$(this).data("jam_lengkap"),s=$(this).data("jam_mulai").slice(0,5),i=$(this).data("jam_selesai").slice(8,13);$(".txt-jam").text(e),$(".jam_lengkap").val(e),$(".jam_id").val(a),$(".jam_nama").val("Jam ke - "+t),$(".jam_mulai").val(s),$(".jam_selesai").val(i)})}),$(document).ready(function(){$(".btn-edit-jabatan, .btn-hapus-jabatan").on("click",function(){let a=$(this).data("jabatan_id"),t=$(this).data("jabatan_nama"),e=$(this).data("honor_perbulan"),s=$(this).data("honor_pertemuan");$(".txt-jabatan").text(t),$(".jabatan_id").val(a),$(".jabatan_nama").val(t),$(".honor_pertemuan").val(s),$(".honor_perbulan").val(e)})}),$(document).ready(function(){$(".btn-upload-info").on("click",function(){$("#image-id").val("-"),$("#image-edit").val("-"),$(".file-upload-info").click()}),$(".file-upload-info").change(function(){let a=$("#image-id").val();1==cekConfigFoto(this)&&("-"!=a?($("#action-foto-"+a).hide(),$("#foto-info-"+a).css("filter","blur(10px)"),$("#myloader-"+a).removeClass("hide")):($(".preview-wrapper, .myloader").removeClass("hide"),$(".preview-image").css("filter","blur(10px)")),readInfo(this))}),$(document).on("click",".delete-foto-info",function(){let a=$(this).data("id"),t=$(this).data("gambar");$("#action-foto-"+a).hide(),$("#foto-info-"+a).css("filter","blur(10px)"),$("#myloader-"+a).removeClass("hide"),$.ajax({url:"pengumuman/hapusFoto",type:"POST",data:{id:a,gambar:t},success:function(t){"gagal"!=t?setTimeout(()=>{$("#img-wrapper-"+a).remove()},1e3):(tampilNotifikasiAjax("orange-gradient","warning","Hapus foto gagal"),$("#action-info-"+a).show(),$("#foto-info-"+a).css("filter","none"),$("#myloader-"+a).addClass("hide"))}})}),$(document).on("click",".edit-foto-info",function(){let a=$(this).data("id"),t=$(this).data("gambar");$("#image-id").val(a),$("#image-edit").val(t),$(".file-upload-info").click()})}),$(document).ready(function(){"chat"==currentPath?($(".p-link, .np-link").removeAttr("href").removeClass("nav__link"),getAsisten(),cek_pesan_fetch(),setInterval(()=>{fetch_pesan()},5e3),$(".np-link, .p-link").on("click",function(){toAsisten($(this).data("user")),$(".notif-pesan").css("right","-500px")}),$(document).on("click",".p-link",function(){toAsisten($(this).data("user")),$(".notif-pesan").css("right","-500px")})):(cek_pesan_fetch(),setInterval(()=>{cek_pesan_fetch()},1e4));for(let a=128070;a<=128080;a++)$(".emoji-hand").append('<span class="emoji">&#'+a+";&#127995;</span>");for(let a=129304;a<=129311;a++)$(".emoji-hand").append('<span class="emoji">&#'+a+";&#127995;</span>");$(".emoji-hand").append('<span class="emoji">&#129330;&#127995;</span>'),$(".emoji-hand").append('<span class="emoji">&#128170;&#127995;</span>'),$(".emoji-hand").append('<span class="emoji">&#128591;</span>');for(let a=128512;a<=128590;a++)$(".emoji-smiley").append('<span class="emoji">&#'+a+";</span>");$(".emoji").on("click",function(){let a=$(this).text(),t=$(".chat-input-text").val();$(".chat-input-text").val(t+a)}),$(".btn-emoji").on("click",function(){$(".emoji-container").toggle();let a=$(this).text();$(this).text("insert_emoticon"==a?"close":"insert_emoticon")}),$(".chat-user-box").on("click",function(){sessionStorage.setItem("chat-scroll","go"),$(".chat-panel").show(),$(".chat-start").html('<div class="progress"><div class="indeterminate"></div></div>'),$(".notif-pesan").css("right","-500px"),$(".chat-user-box").css("background-color","#fff"),$(this).css("background-color","#a8d6ff"),setTimeout(()=>{$(".chat-input").css("display","flex").addClass("fade-in-fwd")},500);let a=$(this).find(".chat-user-name").text(),t=$(this).find(".chat-user-name").data("u_token"),e=$(this).find(".chat-user-name").data("penerima"),s=$(this).find(".chat-user-name").data("kanal"),i=$(this).find(".chat-user-name").data("jabatan"),n=$(this).find(".chat-user-name").data("foto");$("#user-foto").attr("src",n).removeClass("hide"),$("#chat-with").text(a),$("#user-jabatan").text(i),$(".kanal").val(s),$(".penerima").val(e),$(".u_token").val(t),$(".user_chat_id").val(e),$(".chat_kanal").val(s),fetch_pesan()}),$(".chat-btn").on("click",function(){kirimPesan(),$(".send-loader").removeClass("hide"),$(".chat-btn").addClass("hide")}),$(".back-chat").on("click",function(){$(".chat-panel").hide()})});var pusher=new Pusher("bf535588d7d38b92fa01",{cluster:"ap1"}),channel=pusher.subscribe("my-channel");channel.bind("my-event",function(){let a=$(".penerima").val();$(".kanal").val();"chat"!=currentPath?cek_pesan_fetch():""==a?cek_pesan_fetch():fetch_pesan()});